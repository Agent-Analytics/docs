# Agent Analytics

> Web analytics platform with an HTTP API that AI agents can query.

API base URL: https://api.agentanalytics.sh

## Docs

- [Full API Reference (LLM-friendly)](https://docs.agentanalytics.sh/llms-full.txt): Complete endpoint documentation
- [OpenAPI Spec](https://docs.agentanalytics.sh/openapi.yaml): Machine-readable OpenAPI 3.1 spec
- [Interactive Docs](https://docs.agentanalytics.sh): Scalar-rendered API reference

## MCP Server

URL: https://mcp.agentanalytics.sh/mcp (Streamable HTTP transport)

Add to Claude Code:
```
claude mcp add agent-analytics --transport http https://mcp.agentanalytics.sh/mcp
```

Tools: `list_projects`, `create_project`, `analytics_overview`, `analytics_insights`, `analytics_breakdown`, `analytics_pages`, `analytics_sessions`, `analytics_heatmap`, `analytics_funnel`, `analytics_retention`, `properties`, `properties_received`, `sessions`, `list_experiments`, `create_experiment`, `get_experiment`, `update_experiment`, `delete_experiment`, `live_now`, `query`

## Agent Skill

Install as an agent skill (works with Claude Code, Codex, and other Agent Skills-compatible tools):
```
npx skills add Agent-Analytics/agent-analytics-mcp
```

## Quick Start

1. Sign up at https://app.agentanalytics.sh and get your API key
2. Create a project: `POST /projects` with `X-API-Key` header
3. Add the tracking snippet (returned in project creation response)
4. Query stats: `GET /stats?project=my-site` with `X-API-Key` header

## Authentication

- **API Key** (`aak_*`): Secret key for reading data and project management. Pass via `X-API-Key` header or `?key=` query param.
- **Project Token** (`aat_*`): Public token for event ingestion. Passed in request body.

## Endpoints

### Ingestion
- `POST /track` — Track a single event
- `POST /track/batch` — Track multiple events
- `POST /identify` — Link anonymous user to authenticated identity

### Analytics
- `GET /stats` — Aggregated stats overview
- `GET /events` — Raw event log
- `POST /query` — Flexible analytics query
- `GET /properties` — Discover event names and property keys
- `GET /properties/received` — Property keys by event name
- `GET /sessions` — List sessions
- `GET /breakdown` — Top property values
- `GET /insights` — Period-over-period comparison
- `GET /pages` — Entry/exit page stats
- `GET /sessions/distribution` — Session duration histogram
- `GET /heatmap` — Day-of-week x hour traffic grid
- `GET /retention` — Cohort retention analysis

### Projects
- `GET /projects` — List all projects
- `POST /projects` — Create a new project
- `GET /projects/{id}` — Get project details
- `PATCH /projects/{id}` — Update a project
- `DELETE /projects/{id}` — Delete a project

### Account
- `GET /account` — Get account info
- `POST /account/revoke-key` — Revoke and regenerate API key

### Experiments
- `GET /experiments/config` — Get experiment config for tracker.js
- `POST /experiments` — Create an A/B experiment
- `GET /experiments` — List experiments
- `GET /experiments/{id}` — Get experiment with live results
- `PATCH /experiments/{id}` — Update experiment status
- `DELETE /experiments/{id}` — Delete an experiment

### Funnels
- `POST /funnel` — Funnel analysis

### Streaming
- `GET /stream` — Live event stream (SSE)
- `GET /live` — Live snapshot (real-time)

### Tracking
- `GET /tracker.js` — JavaScript tracker script
- `GET /tracker/cross-subdomain` — Cross-subdomain tracking
- `GET /tracker/declarative-events` — Declarative event tracking
- `GET /tracker/do-not-track` — Do Not Track & disable
- `GET /tracker/outgoing-links` — Outgoing link tracking
- `GET /tracker/time-on-page` — Time-on-page tracking
- `GET /tracker/error-tracking` — JS error tracking
- `GET /tracker/global-properties` — Global properties (aa.set)
- `GET /tracker/performance` — Performance timing
- `GET /tracker/consent` — Consent management (GDPR/CCPA)
- `GET /tracker/impressions` — Content impression tracking

## Rate Limits

| Tier | Requests/min | Event Limit | Data Retention |
|------|-------------|-------------|----------------|
| Free | 10 | 1,000 lifetime | 7 days |
| Pro  | 1,000 | Unlimited | 365 days |
